<!-- Copyright 2020 Rohit Goswami <rog32@hi.is>
     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
     http://www.apache.org/licenses/LICENSE-2.0
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License. -->
<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SymEngine C++ API: /home/runner/work/symengine/symengine/symengine/cse.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
  loader: { load: ["[tex]/unicode", "[tex]/ams"] },
  tex: {
    packages: { "[+]": ["unicode", "ams"] },
    tags: "ams",
  },
};
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<!-- <link href="doxygen.css" rel="stylesheet" type="text/css" /> -->
<link href="doxyYoda.min.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" >
$(document).ready(function() {
     $(".fragment").wrap("<details class='code-details'></details>");
     $(".code-details").append("<summary>Code</summary>");
 }
)
</script>
</head>
<body>
<div class="grid-contents">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<nav class="title_area">
<span class="project_info">SymEngine C++ API </span>
</nav>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5f3c0b4b33d21f966cb3219df2063971.html">symengine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">cse.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="basic_8h.html">symengine/basic.h</a>&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="add_8h.html">symengine/add.h</a>&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="mul_8h.html">symengine/mul.h</a>&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="functions_8h.html">symengine/functions.h</a>&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="visitor_8h.html">symengine/visitor.h</a>&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceSymEngine.html">SymEngine</a></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;{</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;umap_basic_basic opt_cse(<span class="keyword">const</span> vec_basic &amp;exprs);</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keywordtype">void</span> tree_cse(vec_pair &amp;replacements, vec_basic &amp;reduced_exprs,</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;              <span class="keyword">const</span> vec_basic &amp;exprs, umap_basic_basic &amp;opt_subs);</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="classSymEngine_1_1FuncArgTracker.html">   15</a></span>&#160;<span class="keyword">class </span><a class="code" href="classSymEngine_1_1FuncArgTracker.html">FuncArgTracker</a></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;{</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    std::unordered_map&lt;RCP&lt;const Basic&gt;, unsigned, <a class="code" href="structSymEngine_1_1RCPBasicHash.html">RCPBasicHash</a>, <a class="code" href="structSymEngine_1_1RCPBasicKeyEq.html">RCPBasicKeyEq</a>&gt;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        value_numbers;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    vec_basic value_number_to_value;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    std::vector&lt;std::set&lt;unsigned&gt;&gt; arg_to_funcset;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    std::vector&lt;std::set&lt;unsigned&gt;&gt; func_to_argset;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="classSymEngine_1_1FuncArgTracker.html">FuncArgTracker</a>(</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        <span class="keyword">const</span> std::vector&lt;std::pair&lt;RCP&lt;const Basic&gt;, vec_basic&gt;&gt; &amp;funcs)</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        arg_to_funcset.resize(funcs.size());</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> func_i = 0; func_i &lt; funcs.size(); func_i++) {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            std::set&lt;unsigned&gt; func_argset;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;func_arg : funcs[func_i].second) {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                <span class="keywordtype">unsigned</span> arg_number = get_or_add_value_number(func_arg);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                func_argset.insert(arg_number);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                arg_to_funcset[arg_number].insert(func_i);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            func_to_argset.push_back(func_argset);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        }</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    }</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Container&gt;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    vec_basic get_args_in_value_order(Container &amp;argset)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        vec_basic v;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i : argset) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            v.push_back(value_number_to_value[i]);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">unsigned</span> get_or_add_value_number(RCP&lt;const Basic&gt; value)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordtype">unsigned</span> nvalues = numeric_cast&lt;unsigned&gt;(value_numbers.size());</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keyword">auto</span> ret = value_numbers.insert(std::make_pair(value, nvalues));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordtype">bool</span> inserted = ret.second;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">if</span> (inserted) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            value_number_to_value.push_back(value);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            arg_to_funcset.push_back(std::set&lt;unsigned&gt;());</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <span class="keywordflow">return</span> nvalues;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="keywordflow">return</span> ret.first-&gt;second;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">void</span> stop_arg_tracking(<span class="keywordtype">unsigned</span> func_i)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> arg : func_to_argset[func_i]) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            arg_to_funcset[arg].erase(func_i);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">       Return a dict whose keys are function numbers. The entries of the dict</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">       are the number of arguments said function has in common with `argset`.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">       Entries have at least 2 items in common.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    std::map&lt;unsigned, unsigned&gt;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    get_common_arg_candidates(std::set&lt;unsigned&gt; &amp;argset, <span class="keywordtype">unsigned</span> min_func_i)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        std::map&lt;unsigned, unsigned&gt; count_map;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        std::vector&lt;std::set&lt;unsigned&gt;&gt; funcsets;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> arg : argset) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            funcsets.push_back(arg_to_funcset[arg]);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="comment">// Sorted by size to make best use of the performance hack below.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        std::sort(funcsets.begin(), funcsets.end(),</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                  [](<span class="keyword">const</span> std::set&lt;unsigned&gt; &amp;a, <span class="keyword">const</span> std::set&lt;unsigned&gt; &amp;b) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                      return a.size() &lt; b.size();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                  });</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; funcsets.size(); i++) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="keyword">auto</span> &amp;funcset = funcsets[i];</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> func_i : funcset) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                <span class="keywordflow">if</span> (func_i &gt;= min_func_i) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    count_map[func_i] += 1;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="comment">/*auto &amp;largest_funcset = funcsets[funcsets.size() - 1];</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">        // We pick the smaller of the two containers to iterate over to</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">        // reduce the number of items we have to look at.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">        if (largest_funcset.size() &lt; count_map.size()) {</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">            for (unsigned func_i : largest_funcset) {</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">                if (count_map[func_i] &lt; 1) {</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">                    continue;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">                }</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">                if (count_map.find(func_i) != count_map.end()) {</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">                    count_map[func_i] += 1;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">                }</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">            }</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">        } else {</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">            for (auto &amp;count_map_pair : count_map) {</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">                unsigned func_i = count_map_pair.first;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">                if (count_map[func_i] &lt; 1) {</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">                    continue;</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">                }</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">                if (largest_funcset.find(func_i) != largest_funcset.end()) {</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">                    count_map[func_i] += 1;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">                }</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">            }</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">        }*/</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keyword">auto</span> iter = count_map.begin();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">for</span> (; iter != count_map.end();) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">if</span> (iter-&gt;second &gt;= 2) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                ++iter;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                count_map.erase(iter++);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">return</span> count_map;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Container1, <span class="keyword">typename</span> Container2&gt;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    std::vector&lt;unsigned&gt;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    get_subset_candidates(<span class="keyword">const</span> Container1 &amp;argset,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                          <span class="keyword">const</span> Container2 &amp;restrict_to_funcset)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        std::vector&lt;unsigned&gt; indices;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> f : restrict_to_funcset) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            indices.push_back(f);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        std::sort(std::begin(indices), std::end(indices));</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        std::vector&lt;unsigned&gt; intersect_result;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;arg : argset) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            std::set_intersection(indices.begin(), indices.end(),</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                  arg_to_funcset[arg].begin(),</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                  arg_to_funcset[arg].end(),</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                  std::back_inserter(intersect_result));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            intersect_result.swap(indices);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            intersect_result.clear();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span> indices;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">void</span> update_func_argset(<span class="keywordtype">unsigned</span> func_i,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                            <span class="keyword">const</span> std::vector&lt;unsigned&gt; &amp;new_args)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment">// Update a function with a new set of arguments.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keyword">auto</span> &amp;old_args = func_to_argset[func_i];</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        std::set&lt;unsigned&gt; diff;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        std::set_difference(old_args.begin(), old_args.end(), new_args.begin(),</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                            new_args.end(), std::inserter(diff, diff.begin()));</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;deleted_arg : diff) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            arg_to_funcset[deleted_arg].erase(func_i);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        diff.clear();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        std::set_difference(new_args.begin(), new_args.end(), old_args.begin(),</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                            old_args.end(), std::inserter(diff, diff.begin()));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;added_arg : diff) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            arg_to_funcset[added_arg].insert(func_i);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        func_to_argset[func_i].clear();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        func_to_argset[func_i].insert(new_args.begin(), new_args.end());</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;};</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;std::vector&lt;unsigned&gt; set_diff(<span class="keyword">const</span> std::set&lt;unsigned&gt; &amp;a,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                               <span class="keyword">const</span> std::vector&lt;unsigned&gt; &amp;b)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    std::vector&lt;unsigned&gt; diff;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    std::set_difference(a.begin(), a.end(), b.begin(), b.end(),</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        std::inserter(diff, diff.begin()));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">return</span> diff;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="keywordtype">void</span> add_to_sorted_vec(std::vector&lt;unsigned&gt; &amp;vec, <span class="keywordtype">unsigned</span> number)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (std::find(vec.begin(), vec.end(), number) == vec.end()) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">// Add number if not found</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        vec.insert(std::upper_bound(vec.begin(), vec.end(), number), number);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="keywordtype">void</span> match_common_args(<span class="keyword">const</span> std::string &amp;func_class, <span class="keyword">const</span> vec_basic &amp;funcs_,</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                       umap_basic_basic &amp;opt_subs)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    std::vector&lt;std::pair&lt;RCP&lt;const Basic&gt;, vec_basic&gt;&gt; funcs;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;b : funcs_) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        funcs.push_back(std::make_pair(b, b-&gt;get_args()));</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    std::sort(funcs.begin(), funcs.end(),</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;              [](<span class="keyword">const</span> std::pair&lt;RCP&lt;const Basic&gt;, vec_basic&gt; &amp;a,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                 <span class="keyword">const</span> std::pair&lt;RCP&lt;const Basic&gt;, vec_basic&gt; &amp;b) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                  return a.second.size() &lt; b.second.size();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;              });</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">auto</span> arg_tracker = FuncArgTracker(funcs);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    std::set&lt;unsigned&gt; changed;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    std::map&lt;unsigned, unsigned&gt; common_arg_candidates_counts;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; funcs.size(); i++) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        common_arg_candidates_counts = arg_tracker.get_common_arg_candidates(</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            arg_tracker.func_to_argset[i], i + 1);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        std::deque&lt;unsigned&gt; common_arg_candidates;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = common_arg_candidates_counts.begin();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;             it != common_arg_candidates_counts.end(); ++it) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            common_arg_candidates.push_back(it-&gt;first);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">// Sort the candidates in order of match size.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// This makes us try combining smaller matches first.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        std::sort(common_arg_candidates.begin(), common_arg_candidates.end(),</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                  [&amp;](<span class="keywordtype">unsigned</span> a, <span class="keywordtype">unsigned</span> b) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                      if (common_arg_candidates_counts[a]</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                          == common_arg_candidates_counts[b]) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                          return a &lt; b;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                      }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                      <span class="keywordflow">return</span> common_arg_candidates_counts[a]</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                             &lt; common_arg_candidates_counts[b];</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                  });</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">while</span> (common_arg_candidates.size() &gt; 0) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="keywordtype">unsigned</span> j = common_arg_candidates.front();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            common_arg_candidates.pop_front();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            std::vector&lt;unsigned&gt; com_args;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            std::set_intersection(arg_tracker.func_to_argset[i].begin(),</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                  arg_tracker.func_to_argset[i].end(),</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                  arg_tracker.func_to_argset[j].begin(),</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                  arg_tracker.func_to_argset[j].end(),</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                  std::back_inserter(com_args));</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">if</span> (com_args.size() &lt;= 1) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="comment">// This may happen if a set of common arguments was already</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                <span class="comment">// combined in a previous iteration.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            std::vector&lt;unsigned&gt; diff_i</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                = set_diff(arg_tracker.func_to_argset[i], com_args);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordtype">unsigned</span> com_func_number;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">if</span> (diff_i.size() &gt; 0) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="comment">// com_func needs to be unevaluated to allow for recursive</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="comment">// matches.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <span class="keyword">auto</span> com_func = function_symbol(</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    func_class, arg_tracker.get_args_in_value_order(com_args));</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                com_func_number = arg_tracker.get_or_add_value_number(com_func);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                add_to_sorted_vec(diff_i, com_func_number);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                arg_tracker.update_func_argset(i, diff_i);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                changed.insert(i);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                <span class="comment">// Treat the whole expression as a CSE.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <span class="comment">// The reason this needs to be done is somewhat subtle. Within</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <span class="comment">// tree_cse(), to_eliminate only contains expressions that are</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <span class="comment">// seen more than once. The problem is unevaluated expressions</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                <span class="comment">// do not compare equal to the evaluated equivalent. So</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                <span class="comment">// tree_cse() won&#39;t mark funcs[i] as a CSE if we use an</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="comment">// unevaluated version.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                com_func_number</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                    = arg_tracker.get_or_add_value_number(funcs[i].first);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            std::vector&lt;unsigned&gt; diff_j</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                = set_diff(arg_tracker.func_to_argset[j], com_args);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            add_to_sorted_vec(diff_j, com_func_number);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            arg_tracker.update_func_argset(j, diff_j);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            changed.insert(j);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> k : arg_tracker.get_subset_candidates(</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                     com_args, common_arg_candidates)) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                std::vector&lt;unsigned&gt; diff_k</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    = set_diff(arg_tracker.func_to_argset[k], com_args);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                add_to_sorted_vec(diff_k, com_func_number);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                arg_tracker.update_func_argset(k, diff_k);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                changed.insert(k);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">if</span> (std::find(changed.begin(), changed.end(), i) != changed.end()) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            opt_subs[funcs[i].first] = function_symbol(</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                func_class, arg_tracker.get_args_in_value_order(</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                arg_tracker.func_to_argset[i]));</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        arg_tracker.stop_arg_tracking(i);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="classSymEngine_1_1OptsCSEVisitor.html">  311</a></span>&#160;<span class="keyword">class </span><a class="code" href="classSymEngine_1_1OptsCSEVisitor.html">OptsCSEVisitor</a> : <span class="keyword">public</span> <a class="code" href="classSymEngine_1_1BaseVisitor.html">BaseVisitor</a>&lt;OptsCSEVisitor&gt;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;{</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    umap_basic_basic &amp;opt_subs;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    set_basic adds;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    set_basic muls;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    set_basic seen_subexp;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="classSymEngine_1_1OptsCSEVisitor.html">OptsCSEVisitor</a>(umap_basic_basic &amp;opt_subs_) : opt_subs(opt_subs_) {}</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordtype">bool</span> is_seen(<span class="keyword">const</span> <a class="code" href="classSymEngine_1_1Basic.html">Basic</a> &amp;expr)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">return</span> (seen_subexp.find(expr.<a class="code" href="classSymEngine_1_1EnableRCPFromThis.html#aed6b2bd25fd3fd124a5e97427f8372f2">rcp_from_this</a>()) != seen_subexp.end());</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">void</span> bvisit(<span class="keyword">const</span> <a class="code" href="classSymEngine_1_1Derivative.html">Derivative</a> &amp;x)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordtype">void</span> bvisit(<span class="keyword">const</span> <a class="code" href="classSymEngine_1_1Subs.html">Subs</a> &amp;x)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordtype">void</span> bvisit(<span class="keyword">const</span> <a class="code" href="classSymEngine_1_1Add.html">Add</a> &amp;x)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">if</span> (not is_seen(x)) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            seen_subexp.insert(x.<a class="code" href="classSymEngine_1_1EnableRCPFromThis.html#aed6b2bd25fd3fd124a5e97427f8372f2">rcp_from_this</a>());</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : x.<a class="code" href="classSymEngine_1_1Add.html#a6460ca4e653fd4c6261823894cb3e520">get_args</a>()) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                p-&gt;accept(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            adds.insert(x.<a class="code" href="classSymEngine_1_1EnableRCPFromThis.html#aed6b2bd25fd3fd124a5e97427f8372f2">rcp_from_this</a>());</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">void</span> bvisit(<span class="keyword">const</span> <a class="code" href="classSymEngine_1_1Pow.html">Pow</a> &amp;x)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">if</span> (not is_seen(x)) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="keyword">auto</span> expr = x.<a class="code" href="classSymEngine_1_1EnableRCPFromThis.html#aed6b2bd25fd3fd124a5e97427f8372f2">rcp_from_this</a>();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            seen_subexp.insert(expr);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : x.<a class="code" href="classSymEngine_1_1Pow.html#a66f297e18c45c65e2a4bfe236ef3a845">get_args</a>()) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                p-&gt;accept(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keyword">auto</span> ex = x.<a class="code" href="classSymEngine_1_1Pow.html#a8210eaaee4900725026ce3beefbcf9b3">get_exp</a>();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">if</span> (is_a&lt;Mul&gt;(*ex)) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                ex = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classSymEngine_1_1Mul.html">Mul</a> &amp;<span class="keyword">&gt;</span>(*ex).get_coef();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespaceSymEngine.html#a002907d330f94b2da86bcc5ec1f998cd">is_a_Number</a>(*ex)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                and <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classSymEngine_1_1Number.html">Number</a> &amp;<span class="keyword">&gt;</span>(*ex).<a class="code" href="classSymEngine_1_1Number.html#a648c569350bce74ac1b8f6efc344971f">is_negative</a>()) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                vec_basic v({pow(x.<a class="code" href="classSymEngine_1_1Pow.html#ab00b6e8bc69e4ce7a524d7af87771255">get_base</a>(), <a class="code" href="namespaceSymEngine.html#aeb3fb08495ed47a074a19b8bbacb3db2">neg</a>(x.<a class="code" href="classSymEngine_1_1Pow.html#a8210eaaee4900725026ce3beefbcf9b3">get_exp</a>())), <a class="code" href="namespaceSymEngine.html#a17c4fb234fb676cbdcd3e5b19a559356">integer</a>(-1)});</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                opt_subs[expr] = function_symbol(<span class="stringliteral">&quot;pow&quot;</span>, v);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordtype">void</span> bvisit(<span class="keyword">const</span> <a class="code" href="classSymEngine_1_1Mul.html">Mul</a> &amp;x)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> (not is_seen(x)) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keyword">auto</span> expr = x.<a class="code" href="classSymEngine_1_1EnableRCPFromThis.html#aed6b2bd25fd3fd124a5e97427f8372f2">rcp_from_this</a>();</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            seen_subexp.insert(expr);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : x.<a class="code" href="classSymEngine_1_1Mul.html#ad3b54721ec87a17d9b360224601f9448">get_args</a>()) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                p-&gt;accept(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span> (x.get_coef()-&gt;is_negative()) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <span class="keyword">auto</span> neg_expr = <a class="code" href="namespaceSymEngine.html#aeb3fb08495ed47a074a19b8bbacb3db2">neg</a>(x.<a class="code" href="classSymEngine_1_1EnableRCPFromThis.html#aed6b2bd25fd3fd124a5e97427f8372f2">rcp_from_this</a>());</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="keywordflow">if</span> (not is_a&lt;Symbol&gt;(*neg_expr)) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                    opt_subs[expr]</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                        = function_symbol(<span class="stringliteral">&quot;mul&quot;</span>, {<a class="code" href="namespaceSymEngine.html#a17c4fb234fb676cbdcd3e5b19a559356">integer</a>(-1), neg_expr});</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    seen_subexp.insert(neg_expr);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    expr = neg_expr;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">if</span> (is_a&lt;Mul&gt;(*expr)) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                muls.insert(expr);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordtype">void</span> bvisit(<span class="keyword">const</span> <a class="code" href="classSymEngine_1_1Basic.html">Basic</a> &amp;x)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keyword">auto</span> v = x.<a class="code" href="classSymEngine_1_1Basic.html#a6544293931047d6d9097e81f7d306cae">get_args</a>();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">if</span> (v.size() &gt; 0 and not is_seen(x)) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <span class="keyword">auto</span> expr = x.<a class="code" href="classSymEngine_1_1EnableRCPFromThis.html#aed6b2bd25fd3fd124a5e97427f8372f2">rcp_from_this</a>();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            seen_subexp.insert(expr);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : v) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                p-&gt;accept(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;};</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;vec_basic set_as_vec(<span class="keyword">const</span> set_basic &amp;s)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    vec_basic result;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;u : s) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        result.push_back(u);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;}</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;umap_basic_basic opt_cse(<span class="keyword">const</span> vec_basic &amp;exprs)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// Find optimization opportunities in Adds, Muls, Pows and negative</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// coefficient Muls</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    umap_basic_basic opt_subs;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    OptsCSEVisitor visitor(opt_subs);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;e : exprs) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        e-&gt;accept(visitor);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    match_common_args(<span class="stringliteral">&quot;add&quot;</span>, set_as_vec(visitor.adds), opt_subs);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    match_common_args(<span class="stringliteral">&quot;mul&quot;</span>, set_as_vec(visitor.muls), opt_subs);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span> opt_subs;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="classSymEngine_1_1RebuildVisitor.html">  420</a></span>&#160;<span class="keyword">class </span><a class="code" href="classSymEngine_1_1RebuildVisitor.html">RebuildVisitor</a> : <span class="keyword">public</span> <a class="code" href="classSymEngine_1_1BaseVisitor.html">BaseVisitor</a>&lt;RebuildVisitor, TransformVisitor&gt;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    umap_basic_basic &amp;subs;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    umap_basic_basic &amp;opt_subs;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    set_basic &amp;to_eliminate;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    set_basic &amp;excluded_symbols;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    vec_pair &amp;replacements;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">unsigned</span> next_symbol_index = 0;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keyword">using</span> TransformVisitor::bvisit;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keyword">using</span> TransformVisitor::result_;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="classSymEngine_1_1RebuildVisitor.html">RebuildVisitor</a>(umap_basic_basic &amp;subs_, umap_basic_basic &amp;opt_subs_,</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                   set_basic &amp;to_eliminate_, set_basic &amp;excluded_symbols_,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                   vec_pair &amp;replacements_)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        : subs(subs_), opt_subs(opt_subs_), to_eliminate(to_eliminate_),</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;          excluded_symbols(excluded_symbols_), replacements(replacements_)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    RCP&lt;const Basic&gt; apply(<span class="keyword">const</span> RCP&lt;const Basic&gt; &amp;orig_expr)<span class="keyword"> override</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        RCP&lt;const Basic&gt; expr = orig_expr;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceSymEngine.html#a9b828cb692f763f05e2ee78d7cde30f0">is_a_Atom</a>(*expr)) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">return</span> expr;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keyword">auto</span> iter = subs.find(expr);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span> (iter != subs.end()) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordflow">return</span> iter-&gt;second;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keyword">auto</span> iter2 = opt_subs.find(expr);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">if</span> (iter2 != opt_subs.end()) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            expr = iter2-&gt;second;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        expr-&gt;accept(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keyword">auto</span> new_expr = result_;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">if</span> (to_eliminate.find(orig_expr) != to_eliminate.end()) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keyword">auto</span> sym = next_symbol();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            subs[orig_expr] = sym;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            replacements.push_back(</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                std::pair&lt;RCP&lt;const Basic&gt;, RCP&lt;const Basic&gt;&gt;(sym, new_expr));</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="keywordflow">return</span> sym;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">return</span> new_expr;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    RCP&lt;const Basic&gt; next_symbol()</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        RCP&lt;const Basic&gt; sym = <a class="code" href="namespaceSymEngine.html#a1f382b48b9cb214e1017d0e11fd3e6d6">symbol</a>(<span class="stringliteral">&quot;x&quot;</span> + <a class="code" href="namespaceSymEngine.html#ac5117c22ff62901ca0c6210310816bc1">to_string</a>(next_symbol_index));</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        next_symbol_index++;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> (excluded_symbols.find(sym) == excluded_symbols.end()) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">return</span> sym;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keywordflow">return</span> next_symbol();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    };</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordtype">void</span> bvisit(<span class="keyword">const</span> <a class="code" href="classSymEngine_1_1FunctionSymbol.html">FunctionSymbol</a> &amp;x)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keyword">auto</span> &amp;fargs = x.get_vec();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        vec_basic newargs;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;a : fargs) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            newargs.push_back(apply(a));</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> (x.<a class="code" href="classSymEngine_1_1FunctionSymbol.html#a85d0fa58580c5661a2694e17adf7f126">get_name</a>() == <span class="stringliteral">&quot;add&quot;</span>) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            result_ = <a class="code" href="namespaceSymEngine.html#ab2c2fd8b576973746d871681781e7130">add</a>(newargs);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x.<a class="code" href="classSymEngine_1_1FunctionSymbol.html#a85d0fa58580c5661a2694e17adf7f126">get_name</a>() == <span class="stringliteral">&quot;mul&quot;</span>) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            result_ = <a class="code" href="namespaceSymEngine.html#a896396e3101c37df65e7a2b46fc7cadd">mul</a>(newargs);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x.<a class="code" href="classSymEngine_1_1FunctionSymbol.html#a85d0fa58580c5661a2694e17adf7f126">get_name</a>() == <span class="stringliteral">&quot;pow&quot;</span>) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            result_ = pow(newargs[0], newargs[1]);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            result_ = x.<a class="code" href="classSymEngine_1_1FunctionSymbol.html#a5b42a7dd618d67a5784afe57d38d87e5">create</a>(newargs);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;};</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="keywordtype">void</span> tree_cse(vec_pair &amp;replacements, vec_basic &amp;reduced_exprs,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;              <span class="keyword">const</span> vec_basic &amp;exprs, umap_basic_basic &amp;opt_subs)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    set_basic to_eliminate;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    set_basic seen_subexp;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    set_basic excluded_symbols;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    std::function&lt;void(RCP&lt;const Basic&gt; &amp; expr)&gt; find_repeated;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    find_repeated = [&amp;](RCP&lt;const Basic&gt; expr) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="comment">// Do not replace atoms</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceSymEngine.html#a002907d330f94b2da86bcc5ec1f998cd">is_a_Number</a>(*expr) or is_a&lt;BooleanAtom&gt;(*expr)) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">if</span> (is_a&lt;Symbol&gt;(*expr)) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            excluded_symbols.insert(expr);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span> (seen_subexp.find(expr) != seen_subexp.end()) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            to_eliminate.insert(expr);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        seen_subexp.insert(expr);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keyword">auto</span> iter = opt_subs.find(expr);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">if</span> (iter != opt_subs.end()) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            expr = iter-&gt;second;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        vec_basic args = expr-&gt;get_args();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;arg : args) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            find_repeated(arg);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    };</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> e : exprs) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        find_repeated(e);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    umap_basic_basic subs;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    RebuildVisitor rebuild_visitor(subs, opt_subs, to_eliminate,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                                   excluded_symbols, replacements);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;e : exprs) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keyword">auto</span> reduced_e = rebuild_visitor.apply(e);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        reduced_exprs.push_back(reduced_e);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;}</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="keywordtype">void</span> cse(vec_pair &amp;replacements, vec_basic &amp;reduced_exprs,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         <span class="keyword">const</span> vec_basic &amp;exprs)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// Find other optimization opportunities.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    umap_basic_basic opt_subs = opt_cse(exprs);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment">// Main CSE algorithm.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    tree_cse(replacements, reduced_exprs, exprs, opt_subs);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;} <span class="comment">// namespace SymEngine</span></div>
<div class="ttc" id="aadd_8h_html"><div class="ttname"><a href="add_8h.html">add.h</a></div><div class="ttdoc">Classes and functions relating to the binary operation of addition.</div></div>
<div class="ttc" id="abasic_8h_html"><div class="ttname"><a href="basic_8h.html">basic.h</a></div><div class="ttdoc">The base class for SymEngine.</div></div>
<div class="ttc" id="aclassSymEngine_1_1Add_html"><div class="ttname"><a href="classSymEngine_1_1Add.html">SymEngine::Add</a></div><div class="ttdoc">The base class for representing addition in symbolic expressions.</div><div class="ttdef"><b>Definition:</b> <a href="add_8h_source.html#l00026">add.h:27</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Add_html_a6460ca4e653fd4c6261823894cb3e520"><div class="ttname"><a href="classSymEngine_1_1Add.html#a6460ca4e653fd4c6261823894cb3e520">SymEngine::Add::get_args</a></div><div class="ttdeci">vec_basic get_args() const override</div><div class="ttdoc">Returns the arguments of the Add.</div><div class="ttdef"><b>Definition:</b> <a href="add_8cpp_source.html#l00397">add.cpp:397</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1BaseVisitor_html"><div class="ttname"><a href="classSymEngine_1_1BaseVisitor.html">SymEngine::BaseVisitor</a></div><div class="ttdef"><b>Definition:</b> <a href="visitor_8h_source.html#l00047">visitor.h:48</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Basic_html"><div class="ttname"><a href="classSymEngine_1_1Basic.html">SymEngine::Basic</a></div><div class="ttdoc">The lowest unit of symbolic representation.</div><div class="ttdef"><b>Definition:</b> <a href="basic_8h_source.html#l00096">basic.h:97</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Basic_html_a6544293931047d6d9097e81f7d306cae"><div class="ttname"><a href="classSymEngine_1_1Basic.html#a6544293931047d6d9097e81f7d306cae">SymEngine::Basic::get_args</a></div><div class="ttdeci">virtual vec_basic get_args() const =0</div><div class="ttdoc">Returns the list of arguments.</div></div>
<div class="ttc" id="aclassSymEngine_1_1Derivative_html"><div class="ttname"><a href="classSymEngine_1_1Derivative.html">SymEngine::Derivative</a></div><div class="ttdef"><b>Definition:</b> <a href="functions_8h_source.html#l00686">functions.h:687</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1EnableRCPFromThis_html_aed6b2bd25fd3fd124a5e97427f8372f2"><div class="ttname"><a href="classSymEngine_1_1EnableRCPFromThis.html#aed6b2bd25fd3fd124a5e97427f8372f2">SymEngine::EnableRCPFromThis::rcp_from_this</a></div><div class="ttdeci">RCP&lt; T &gt; rcp_from_this()</div><div class="ttdoc">Get RCP&lt;T&gt; pointer to self (it will cast the pointer to T)</div><div class="ttdef"><b>Definition:</b> <a href="symengine__rcp_8h_source.html#l00282">symengine_rcp.h:282</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1FuncArgTracker_html"><div class="ttname"><a href="classSymEngine_1_1FuncArgTracker.html">SymEngine::FuncArgTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="cse_8cpp_source.html#l00015">cse.cpp:16</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1FunctionSymbol_html"><div class="ttname"><a href="classSymEngine_1_1FunctionSymbol.html">SymEngine::FunctionSymbol</a></div><div class="ttdef"><b>Definition:</b> <a href="functions_8h_source.html#l00635">functions.h:636</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1FunctionSymbol_html_a5b42a7dd618d67a5784afe57d38d87e5"><div class="ttname"><a href="classSymEngine_1_1FunctionSymbol.html#a5b42a7dd618d67a5784afe57d38d87e5">SymEngine::FunctionSymbol::create</a></div><div class="ttdeci">RCP&lt; const Basic &gt; create(const vec_basic &amp;x) const override</div><div class="ttdoc">Method to construct classes with canonicalization.</div><div class="ttdef"><b>Definition:</b> <a href="functions_8cpp_source.html#l01905">functions.cpp:1905</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1FunctionSymbol_html_a85d0fa58580c5661a2694e17adf7f126"><div class="ttname"><a href="classSymEngine_1_1FunctionSymbol.html#a85d0fa58580c5661a2694e17adf7f126">SymEngine::FunctionSymbol::get_name</a></div><div class="ttdeci">const std::string &amp; get_name() const</div><div class="ttdef"><b>Definition:</b> <a href="functions_8h_source.html#l00654">functions.h:654</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Mul_html"><div class="ttname"><a href="classSymEngine_1_1Mul.html">SymEngine::Mul</a></div><div class="ttdef"><b>Definition:</b> <a href="mul_8h_source.html#l00073">mul.h:74</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Mul_html_ad3b54721ec87a17d9b360224601f9448"><div class="ttname"><a href="classSymEngine_1_1Mul.html#ad3b54721ec87a17d9b360224601f9448">SymEngine::Mul::get_args</a></div><div class="ttdeci">vec_basic get_args() const override</div><div class="ttdoc">Returns the list of arguments.</div><div class="ttdef"><b>Definition:</b> <a href="mul_8cpp_source.html#l00507">mul.cpp:507</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Number_html"><div class="ttname"><a href="classSymEngine_1_1Number.html">SymEngine::Number</a></div><div class="ttdef"><b>Definition:</b> <a href="number_8h_source.html#l00018">number.h:19</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Number_html_a648c569350bce74ac1b8f6efc344971f"><div class="ttname"><a href="classSymEngine_1_1Number.html#a648c569350bce74ac1b8f6efc344971f">SymEngine::Number::is_negative</a></div><div class="ttdeci">virtual bool is_negative() const =0</div></div>
<div class="ttc" id="aclassSymEngine_1_1OptsCSEVisitor_html"><div class="ttname"><a href="classSymEngine_1_1OptsCSEVisitor.html">SymEngine::OptsCSEVisitor</a></div><div class="ttdef"><b>Definition:</b> <a href="cse_8cpp_source.html#l00311">cse.cpp:312</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Pow_html"><div class="ttname"><a href="classSymEngine_1_1Pow.html">SymEngine::Pow</a></div><div class="ttdef"><b>Definition:</b> <a href="pow_8h_source.html#l00017">pow.h:18</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Pow_html_a66f297e18c45c65e2a4bfe236ef3a845"><div class="ttname"><a href="classSymEngine_1_1Pow.html#a66f297e18c45c65e2a4bfe236ef3a845">SymEngine::Pow::get_args</a></div><div class="ttdeci">vec_basic get_args() const override</div><div class="ttdoc">Returns the list of arguments.</div><div class="ttdef"><b>Definition:</b> <a href="pow_8cpp_source.html#l00266">pow.cpp:266</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Pow_html_a8210eaaee4900725026ce3beefbcf9b3"><div class="ttname"><a href="classSymEngine_1_1Pow.html#a8210eaaee4900725026ce3beefbcf9b3">SymEngine::Pow::get_exp</a></div><div class="ttdeci">RCP&lt; const Basic &gt; get_exp() const</div><div class="ttdef"><b>Definition:</b> <a href="pow_8h_source.html#l00042">pow.h:42</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Pow_html_ab00b6e8bc69e4ce7a524d7af87771255"><div class="ttname"><a href="classSymEngine_1_1Pow.html#ab00b6e8bc69e4ce7a524d7af87771255">SymEngine::Pow::get_base</a></div><div class="ttdeci">RCP&lt; const Basic &gt; get_base() const</div><div class="ttdef"><b>Definition:</b> <a href="pow_8h_source.html#l00037">pow.h:37</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1RebuildVisitor_html"><div class="ttname"><a href="classSymEngine_1_1RebuildVisitor.html">SymEngine::RebuildVisitor</a></div><div class="ttdef"><b>Definition:</b> <a href="cse_8cpp_source.html#l00420">cse.cpp:421</a></div></div>
<div class="ttc" id="aclassSymEngine_1_1Subs_html"><div class="ttname"><a href="classSymEngine_1_1Subs.html">SymEngine::Subs</a></div><div class="ttdef"><b>Definition:</b> <a href="functions_8h_source.html#l00738">functions.h:739</a></div></div>
<div class="ttc" id="afunctions_8h_html"><div class="ttname"><a href="functions_8h.html">functions.h</a></div></div>
<div class="ttc" id="amul_8h_html"><div class="ttname"><a href="mul_8h.html">mul.h</a></div></div>
<div class="ttc" id="anamespaceSymEngine_html"><div class="ttname"><a href="namespaceSymEngine.html">SymEngine</a></div><div class="ttdoc">Main namespace for SymEngine package.</div><div class="ttdef"><b>Definition:</b> <a href="add_8cpp_source.html#l00018">add.cpp:19</a></div></div>
<div class="ttc" id="anamespaceSymEngine_html_a002907d330f94b2da86bcc5ec1f998cd"><div class="ttname"><a href="namespaceSymEngine.html#a002907d330f94b2da86bcc5ec1f998cd">SymEngine::is_a_Number</a></div><div class="ttdeci">bool is_a_Number(const Basic &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="number_8h_source.html#l00130">number.h:130</a></div></div>
<div class="ttc" id="anamespaceSymEngine_html_a17c4fb234fb676cbdcd3e5b19a559356"><div class="ttname"><a href="namespaceSymEngine.html#a17c4fb234fb676cbdcd3e5b19a559356">SymEngine::integer</a></div><div class="ttdeci">std::enable_if&lt; std::is_integral&lt; T &gt;::value, RCP&lt; const Integer &gt; &gt;::type integer(T i)</div><div class="ttdef"><b>Definition:</b> <a href="integer_8h_source.html#l00197">integer.h:197</a></div></div>
<div class="ttc" id="anamespaceSymEngine_html_a1f382b48b9cb214e1017d0e11fd3e6d6"><div class="ttname"><a href="namespaceSymEngine.html#a1f382b48b9cb214e1017d0e11fd3e6d6">SymEngine::symbol</a></div><div class="ttdeci">RCP&lt; const Symbol &gt; symbol(const std::string &amp;name)</div><div class="ttdoc">inline version to return Symbol</div><div class="ttdef"><b>Definition:</b> <a href="symbol_8h_source.html#l00082">symbol.h:82</a></div></div>
<div class="ttc" id="anamespaceSymEngine_html_a896396e3101c37df65e7a2b46fc7cadd"><div class="ttname"><a href="namespaceSymEngine.html#a896396e3101c37df65e7a2b46fc7cadd">SymEngine::mul</a></div><div class="ttdeci">RCP&lt; const Basic &gt; mul(const RCP&lt; const Basic &gt; &amp;a, const RCP&lt; const Basic &gt; &amp;b)</div><div class="ttdoc">Multiplication.</div><div class="ttdef"><b>Definition:</b> <a href="mul_8cpp_source.html#l00352">mul.cpp:352</a></div></div>
<div class="ttc" id="anamespaceSymEngine_html_a9b828cb692f763f05e2ee78d7cde30f0"><div class="ttname"><a href="namespaceSymEngine.html#a9b828cb692f763f05e2ee78d7cde30f0">SymEngine::is_a_Atom</a></div><div class="ttdeci">bool is_a_Atom(const Basic &amp;b)</div><div class="ttdoc">Returns true if b is an atom. i.e. b.get_args returns an empty vector.</div><div class="ttdef"><b>Definition:</b> <a href="basic_8cpp_source.html#l00105">basic.cpp:105</a></div></div>
<div class="ttc" id="anamespaceSymEngine_html_ab2c2fd8b576973746d871681781e7130"><div class="ttname"><a href="namespaceSymEngine.html#ab2c2fd8b576973746d871681781e7130">SymEngine::add</a></div><div class="ttdeci">RCP&lt; const Basic &gt; add(const RCP&lt; const Basic &gt; &amp;a, const RCP&lt; const Basic &gt; &amp;b)</div><div class="ttdoc">Adds two objects (safely).</div><div class="ttdef"><b>Definition:</b> <a href="add_8cpp_source.html#l00425">add.cpp:425</a></div></div>
<div class="ttc" id="anamespaceSymEngine_html_ac5117c22ff62901ca0c6210310816bc1"><div class="ttname"><a href="namespaceSymEngine.html#ac5117c22ff62901ca0c6210310816bc1">SymEngine::to_string</a></div><div class="ttdeci">std::string to_string(const T &amp;value)</div><div class="ttdoc">workaround for MinGW bug</div><div class="ttdef"><b>Definition:</b> <a href="basic-inl_8h_source.html#l00113">basic-inl.h:113</a></div></div>
<div class="ttc" id="anamespaceSymEngine_html_aeb3fb08495ed47a074a19b8bbacb3db2"><div class="ttname"><a href="namespaceSymEngine.html#aeb3fb08495ed47a074a19b8bbacb3db2">SymEngine::neg</a></div><div class="ttdeci">RCP&lt; const Basic &gt; neg(const RCP&lt; const Basic &gt; &amp;a)</div><div class="ttdoc">Negation.</div><div class="ttdef"><b>Definition:</b> <a href="mul_8cpp_source.html#l00443">mul.cpp:443</a></div></div>
<div class="ttc" id="astructSymEngine_1_1RCPBasicHash_html"><div class="ttname"><a href="structSymEngine_1_1RCPBasicHash.html">SymEngine::RCPBasicHash</a></div><div class="ttdoc">Our hash:</div><div class="ttdef"><b>Definition:</b> <a href="basic_8h_source.html#l00210">basic.h:210</a></div></div>
<div class="ttc" id="astructSymEngine_1_1RCPBasicKeyEq_html"><div class="ttname"><a href="structSymEngine_1_1RCPBasicKeyEq.html">SymEngine::RCPBasicKeyEq</a></div><div class="ttdoc">Our comparison (==)</div><div class="ttdef"><b>Definition:</b> <a href="basic_8h_source.html#l00219">basic.h:219</a></div></div>
<div class="ttc" id="avisitor_8h_html"><div class="ttname"><a href="visitor_8h.html">visitor.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- Copyright 2020 Rohit Goswami <rog32@hi.is>
     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
     http://www.apache.org/licenses/LICENSE-2.0
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License. -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div class="footer">
<hr class="footline"/><address class="footline"><small>
    Generated by&#160;<a href="https://www.doxygen.org/index.html">Doxygen 1.9.1</a> and the <a class="outlink" href="https://github.com/HaoZeke/doxyYoda">doxyYoda theme</a>
</small></address>
</div>
</div>
</body>
</html>
